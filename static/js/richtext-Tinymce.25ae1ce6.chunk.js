(this["webpackJsonpe-admin-react"]=this["webpackJsonpe-admin-react"]||[]).push([[22],{490:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var a=n(171),r=n(0),i=n.n(r),o=n(906),c=n(172),s=n.n(c),u=(n(202),n(245)),l=(n(303),n(95)),d=n(73),p=n(104),m=n(103),f=n(102),b=n(327),h=n(921),g=n(85),v=(n(318),[["advlist","anchor","autolink","autoresize","autosave","bbcode","charmap","code","codesample","directionality","emoticons","fullpage","fullscreen","help","hr","image","imagetools","importcss","insertdatetime","legacyoutput","link","lists","media","nonbreaking","noneditable","pagebreak","paste","preview","print","quickbars","save","searchreplace","spellchecker","tabfocus","table","template","textpattern","toc","visualblocks","visualchars","wordcount","customerimageupload","ax_wordlimit"].join(" ")]),_=["code undo redo restoredraft","cut copy paste pastetext","forecolor backcolor bold italic underline strikethrough link anchor","alignleft aligncenter alignright alignjustify outdent indent","formatselect fontselect fontsizeselect","bullist numlist","blockquote subscript superscript removeformat","table image media charmap emoticons hr pagebreak insertdatetime print preview","fullscreen","bdmap indent2em lineheight formatpainter axupimgs customerimageupload"].join(" | "),k=n(998);function x(){window.tinymce.PluginManager.add("customerimageupload",(function(e){!function(e){e.addCommand("mceCustomerImageUpload",(function(){Object(k.a)().then((function(t){var n=e.settings.imageSelectorCallback;n&&n(t,(function(t){e.insertContent('<img src="'.concat(t,'" alt="\u52a0\u8f7d\u5931\u8d25" style="max-width: 100%;height: auto;" />'))}))}))}))}(e),function(e){e.ui.registry.addButton("customerimageupload",{icon:"image",tooltip:"\u4e0a\u4f20\u56fe\u7247",onAction:function(){e.execCommand("mceCustomerImageUpload")}})}(e)}))}var y=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).hasInit=!1,a.hasChange=!1,a.initEditor=function(){var e=a.state,t=e.id,n=e.value,r=a.props.height;x(),window.tinymce.init({selector:"#"+t,language:"zh_CN",content_style:"img {max-width:100%;}",auto_focus:!1,height:r,min_height:r,object_resizing:!1,placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9",plugins:v,toolbar:_,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"\u5fae\u8f6f\u96c5\u9ed1=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;\u82f9\u679c\u82f9\u65b9=PingFang SC,Microsoft YaHei,sans-serif;\u5b8b\u4f53=simsun,serif;\u4eff\u5b8b\u4f53=FangSong,serif;\u9ed1\u4f53=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",autosave_ask_before_unload:!1,branding:!1,contextmenu:"bold copy",elementpath:!1,statusbar:!1,toolbar_mode:"wrap",quickbars_insert_toolbar:"",quickbars_selection_toolbar:"bold italic | quicklink h2 h3 blockquote",fullpage_default_font_size:"14px",ax_wordlimit_num:140,ax_wordlimit_callback:function(e,t,n){l.b.destroy(),l.b.warning("\u5f53\u524d\u5b57\u6570\uff1a"+t.length+"\uff0c\u9650\u5236\u5b57\u6570\uff1a"+n)},init_instance_callback:function(e){a.editor=e,e.setContent(n||""),a.hasInit=!0,e.on("keyup input",(function(){a.hasChange=!0})),e.on("NodeChange Change keyup",(function(){var t=e.getBody().innerHTML;a.setState({value:t}),a.props.onChange&&a.props.onChange(t)}))},imageSelectorCallback:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.b.loading("\u4e0a\u4f20\u4e2d...",0),e.prev=1,e.next=4,Object(h.d)(t);case 4:r=e.sent,n(r),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),l.b.destroy(),l.b.error("\u4e0a\u4f20\u5931\u8d25");case 13:return e.prev=13,a(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})));return function(t,n){return e.apply(this,arguments)}}()})},a.state={value:e.value,id:Object(g.d)(),loaded:!1},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(b.a)("/e-admin-react/tinymce5.4.2/tinymce.js",window.tinymce,(function(t){if(t)return l.b.warning("\u52a0\u8f7d\u7f16\u8f91\u5668\u5931\u8d25");e.setState({loaded:!0},(function(){e.initEditor()}))}))}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.hasInit&&!this.hasChange&&this.editor.setContent(this.props.value||"")}},{key:"componentWillUnmount",value:function(){this.editor&&this.editor.remove()}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.loaded,a=this.props.height;return n?i.a.createElement("textarea",{id:t,style:{visibility:"hidden",height:a+"px"}}):i.a.createElement("div",{style:{height:a+"px"}})}}]),n}(r.Component);function C(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){c("<b>test</b>")}),1e3);return function(){clearTimeout(e)}}),[]),i.a.createElement(o.a,null,i.a.createElement(y,{value:n,onChange:c}))}y.defaultProps={height:300}},904:function(e,t,n){e.exports={pageWrapper:"index_pageWrapper__iL1ys",hasBread:"index_hasBread__32b6J",isColumn:"index_isColumn__2Ke5Q",pageContainer:"index_pageContainer__2KyEm",bread:"index_bread__9EG6_",backTop:"index_backTop__21_JY"}},906:function(e,t,n){"use strict";n(122),n(911);var a=n(915),r=n(302),i=n(0),o=n.n(i),c=n(6),s=n.n(c),u=(n(244),n(123),n(460),n(912),n(914)),l=n(111),d=n(913),p=n(904),m=n.n(p),f=function(e){var t=e.breadcrumbs;return o.a.createElement(u.a,{className:m.a.bread},t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key},"/"===e.match.url?o.a.createElement(l.b,{to:e.match.url},e.breadcrumb.props.children):o.a.createElement("span",null,e.breadcrumb.props.children))})))},b=function(e){var t=e.breads,n=void 0===t?[]:t,a=Object(d.a)(n)(f);return o.a.createElement(a,null)},h=n(203),g=function(e){var t,n=Object(h.b)().userStore,i=e.wrapperClass,c=e.containerClass,u=e.hasBread,l=e.isColumn,d=n.breads,p=s()(m.a.pageWrapper,i,(t={},Object(r.a)(t,m.a.hasBread,u),Object(r.a)(t,m.a.isColumn,l),t));return o.a.createElement("div",{className:p},u&&o.a.createElement(b,{breads:d}),o.a.createElement("div",{className:"".concat(m.a.pageContainer," ").concat(c)},e.children),o.a.createElement(a.a,{className:m.a.backTop}))};g.defaultProps={wrapperClass:"",containerClass:"",hasBread:!0,isColumn:!1};t.a=g},921:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m}));n(170);var a=n(172),r=n.n(a),i=(n(202),n(245)),o=n(204),c=n(205),s=n.n(c),u=n(85),l=function(e){return Object(o.b)({method:"get",url:"/upload/qiniu_token",params:e})},d=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i,o,c,d,p=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>2&&void 0!==p[2]?p[2]:function(){},e.next=3,l();case 3:return i=e.sent,o=i.token,(c=new FormData).append("file",t),c.append("key",n||Object(u.d)()+t.name),c.append("token",o),e.next=11,s()({method:"post",url:window.QINIU_UPLOAD_URL,data:c,onUploadProgress:a});case 11:return d=e.sent,e.abrupt("return",window.QINIU_PREFIX+d.data.key);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){return Object(o.b)({method:"get",url:"/role/total"})},m=function(e){return Object(o.b)({method:"get",url:"/resource/total",params:e})}},998:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(247),n(248),n(126),n(208),n(123),n(249),n(460),n(144),n(322),n(307),Number(document.documentMode);var a=function(){return new Promise((function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.onchange=function(t){var n=t.target.files[0];e(n)},t.click(),t.remove()}))};document.addEventListener,document.removeEventListener}}]);